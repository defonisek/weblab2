import"./modulepreload-polyfill-B5Qt9EMX.js";/* empty css             */document.addEventListener("DOMContentLoaded",function(){const p=document.getElementById("weather-form"),c=document.getElementById("city-input"),r=document.getElementById("search-btn"),d=document.getElementById("loading-spinner"),a=document.getElementById("weather-result"),u=document.getElementById("error-message"),h=document.getElementById("city-name"),y=document.getElementById("location-details"),g=document.getElementById("temperature"),w=document.getElementById("weather-icon"),f=document.getElementById("weather-description"),E=document.getElementById("feels-like"),v=document.getElementById("humidity"),I=document.getElementById("wind-speed");document.getElementById("pressure");const B=document.querySelectorAll(".city-btn");function l(t){t?(r.disabled=!0,d.classList.add("active"),r.querySelector("span").style.visibility="hidden"):(r.disabled=!1,d.classList.remove("active"),r.querySelector("span").style.visibility="visible")}function s(){a.classList.add("hidden"),u.classList.add("hidden")}async function _(t){const e=`https://geocoding-api.open-meteo.com/v1/search?name=${encodeURIComponent(t)}&count=1&language=ru&format=json`;try{const o=await(await fetch(e)).json();if(o.results&&o.results.length>0){const i=o.results[0];return{latitude:i.latitude,longitude:i.longitude,name:i.name,country:i.country,admin1:i.admin1}}else throw new Error("Город не найден")}catch(n){throw console.error("Ошибка при получении координат:",n),n}}async function C(t,e){const n=`https://api.open-meteo.com/v1/forecast?latitude=${t}&longitude=${e}&current_weather=true&hourly=temperature_2m,relative_humidity_2m,apparent_temperature,wind_speed_10m,wind_direction_10m&temperature_unit=celsius&wind_speed_unit=kmh&timezone=auto&forecast_days=1`;try{return await(await fetch(n)).json()}catch(o){throw console.error("Ошибка при получении погоды:",o),o}}function L(t){return{0:{description:"Ясно",icon:"☀️"},1:{description:"Преимущественно ясно",icon:"🌤️"},2:{description:"Переменная облачность",icon:"⛅"},3:{description:"Пасмурно",icon:"☁️"},45:{description:"Туман",icon:"🌫️"},48:{description:"Изморозь",icon:"🌫️"},51:{description:"Леняя морось",icon:"🌧️"},53:{description:"Умеренная морось",icon:"🌧️"},55:{description:"Сильная морось",icon:"🌧️"},61:{description:"Небольшой дождь",icon:"🌧️"},63:{description:"Умеренный дождь",icon:"🌧️"},65:{description:"Сильный дождь",icon:"🌧️"},80:{description:"Ливень",icon:"⛈️"},81:{description:"Сильный ливень",icon:"⛈️"},82:{description:"Очень сильный ливень",icon:"⛈️"},95:{description:"Гроза",icon:"⛈️"},96:{description:"Гроза с градом",icon:"⛈️"}}[t]||{description:"Неизвестно",icon:"❓"}}function b(t,e){const n=e.current_weather,o=new Date().getHours(),i=L(n.weathercode);h.textContent=t.name,y.textContent=`${t.admin1?t.admin1+", ":""}${t.country}`,g.textContent=`${Math.round(n.temperature)}°C`,w.textContent=i.icon,f.textContent=i.description,E.textContent=`${Math.round(e.hourly.apparent_temperature[o])}°C`,v.textContent=`${e.hourly.relative_humidity_2m[o]||"N/A"}%`,I.textContent=`${Math.round(n.windspeed)} км/ч`,s(),a.classList.remove("hidden")}async function m(t){s(),l(!0);try{const e=await _(t),n=await C(e.latitude,e.longitude);b(e,n)}catch(e){console.error("Ошибка:",e),s(),u.classList.remove("hidden")}finally{l(!1)}}p.addEventListener("submit",function(t){t.preventDefault();const e=c.value.trim();e&&m(e)}),B.forEach(t=>{t.addEventListener("click",function(){const e=this.getAttribute("data-city");c.value=e,m(e)})}),c.focus()});
