import"./main-Cr4PqIHb.js";document.addEventListener("DOMContentLoaded",()=>{const l=document.getElementById("facts-list"),o=document.getElementById("new-fact-btn"),c=document.getElementById("lang-toggle-btn"),s=document.getElementById("error");let e="en",r=!1;function d(t){if(!t){s.textContent="",s.classList.add("hidden");return}s.textContent=t,s.classList.remove("hidden")}function u(t){r=t,o.disabled=t,c.disabled=t,o.textContent=t?"Загрузка…":"Новый факт"}function f(){c.dataset.lang=e,c.textContent=`Язык: ${e.toUpperCase()}`}async function g(){const t=`https://uselessfacts.jsph.pl/api/v2/facts/random?language=${e}`,n={Accept:"application/json"};d(""),u(!0);try{const a=await fetch(t,{headers:n});if(!a.ok)throw new Error(`HTTP ${a.status}`);const i=await a.json(),L=(i==null?void 0:i.text)||"Без текста";p(L)}catch(a){d(`Не удалось загрузить факт: ${a.message}`)}finally{u(!1)}}function p(t){const n=document.createElement("li");n.className="fact-item",n.innerHTML=`<span class="fact-text">${m(t)}</span>`,l.insertBefore(n,l.firstChild)}function m(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}o.addEventListener("click",()=>{r||g()}),c.addEventListener("click",()=>{r||(e=e==="en"?"de":"en",f())}),f(),g()});
